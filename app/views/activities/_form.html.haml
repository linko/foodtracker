= simple_form_for @activity, :html => { :class => 'form-horizontal' } do |f|
  = f.association :category, label: "What", required: false
  = f.input :activity_time, required: false
  - if @activity.persisted?
    = f.input :description, as: :string, required: false
  - else
    .descriptions
      = f.input :description, as: :string, required: false, input_html: { name: 'activity[descriptions][]' }
    = link_to " add description", 'javascript:', class: 'icon-plus controls'

  .form-actions
    = f.button :submit, :class => 'btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")), activities_path, :class => 'btn'
    - if @activity.persisted?
      = link_to 'Delete', activity_path(@activity), method: :delete, class: 'btn btn-danger', confirm: "Are you sure you want to delete entry?"

.template{style: "display: none"}
  .control-group.string.optional
    %label.string.optional.control-label{:for => "activity_description"} Description
    .controls
      %input#activity_description.string.optional{:name => "activity[descriptions][]", :size => "50", :type => "text", :value => ""}/
      = link_to "javascript:" do
        %span{ class: "icon-trash" } &nbsp;


= content_for :javascript do
  :javascript
    $(function(){
      //$("#activity_activity_time").datepicker({"dateFormat": "dd/mm/yy"})

      $('.icon-plus').click(function(){
        $('.descriptions').append($('.template').html())
      })

      $('.icon-trash').live( 'click', function(){
        $(this).closest(".control-group").remove();
      })

    })
